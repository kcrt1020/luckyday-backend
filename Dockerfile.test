FROM openjdk:17
WORKDIR /app

# ✅ 필수 유틸리티(xargs) 설치
RUN if [ -f "/etc/debian_version" ]; then apt-get update && apt-get install -y findutils; \
    elif [ -f "/etc/alpine-release" ]; then apk add --no-cache findutils; \
    else echo "Unsupported OS"; exit 1; fi

# ✅ Gradle Wrapper & 프로젝트 전체 복사
COPY . .

# ✅ 실행 권한 추가 (gradlew 실행 가능하도록)
RUN chmod +x gradlew

# ✅ 컨테이너 내부에서 테스트 실행
CMD ["./gradlew", "test"]
